---
import topoScript from '../scripts/topo.ts?url';
const { title, tagline } = Astro.props;
---
<section class="topo-hero">
  <canvas id="topo-canvas" aria-hidden="true"></canvas>
  <div class="overlay">
    <div class="grid" aria-hidden="true"></div>
    <div class="frame" aria-hidden="true"></div>
    <div class="hud" aria-hidden="true">
      <span id="coord" class="coord mono">37.7749, -122.4194</span>
      <span class="compass n mono">N</span>
      <span class="compass e mono">E</span>
      <span class="compass s mono">S</span>
      <span class="compass w mono">W</span>
    </div>
  </div>
  <div class="hero-text">
    <h1>{title}</h1>
    <p class="subhead mono">{tagline}</p>
  </div>
  <style>
    .topo-hero {
      position: relative;
      width: 100%;
      aspect-ratio: 4/3;
      max-height: 72vh;
      margin-bottom: var(--space-3);
      --frame-color: var(--color-text);
      --grid-major: color-mix(in srgb, var(--color-accent) 30%, transparent);
      --grid-minor: color-mix(in srgb, var(--color-accent) 15%, transparent);
      --contour-color: var(--color-text);
      background: var(--color-bg);
    }
    :global(.theme-light) .topo-hero {
      --contour-color: #000;
    }
    :global(.theme-dark) .topo-hero {
      --contour-color: #fff;
    }
    .topo-hero canvas {
      width: 100%;
      height: 100%;
      display: block;
      background: var(--color-bg);
    }
    .topo-hero .overlay {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }
    .topo-hero .grid {
      position: absolute;
      inset: 0;
      background-image:
        repeating-linear-gradient(var(--grid-minor) 0 1px, transparent 1px 16px),
        repeating-linear-gradient(90deg, var(--grid-minor) 0 1px, transparent 1px 16px),
        repeating-linear-gradient(var(--grid-major) 0 1px, transparent 1px 128px),
        repeating-linear-gradient(90deg, var(--grid-major) 0 1px, transparent 1px 128px);
    }
    .topo-hero .frame {
      position: absolute;
      inset: 0;
      border: 1px solid var(--frame-color);
    }
    .topo-hero .hud .coord {
      position: absolute;
      top: 4px;
      left: 4px;
      font-size: var(--text-12);
      color: color-mix(in srgb, var(--frame-color) 60%, transparent);
    }
    .topo-hero .hud .compass {
      position: absolute;
      font-size: var(--text-12);
      color: color-mix(in srgb, var(--frame-color) 60%, transparent);
    }
    .topo-hero .hud .n { top: -16px; left: 50%; transform: translateX(-50%); }
    .topo-hero .hud .s { bottom: -16px; left: 50%; transform: translateX(-50%); }
    .topo-hero .hud .e { right: -16px; top: 50%; transform: translateY(-50%); }
    .topo-hero .hud .w { left: -16px; top: 50%; transform: translateY(-50%); }
    .topo-hero .hero-text {
      position: absolute;
      bottom: var(--space-2);
      left: var(--space-2);
      color: var(--frame-color);
    }
    .topo-hero .hero-text h1 {
      margin: 0;
      font-size: var(--text-48);
    }
    .topo-hero .hero-text .subhead {
      font-size: var(--text-16);
      margin: 0;
    }
    .topo-hero .toggle {
      position: absolute;
      bottom: 4px;
      right: 4px;
      padding: 2px 6px;
      font-size: var(--text-12);
      border: 1px solid var(--frame-color);
      background: transparent;
      color: var(--frame-color);
      cursor: pointer;
    }
  </style>
<script type="module" src={topoScript}></script>
</section>

